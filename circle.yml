machine:
  python:
    version: 2.7.8

dependencies:
  pre:
    - ln -s ~/.pyenv/versions/3.3.2/bin/python3.3 ~/bin
    - ln -s ~/.pyenv/versions/3.4.1/bin/python3.4 ~/bin
  override:
    - pip install tox
    - bash ./get_selenium.sh
  cache_directories:
    - "libs/"

test:
  pre:
    - python wsgi.py:
        background: true
    - PATH="$PATH:~/shale/phantomjs/bin/" java -jar selenium -role hub:
        background: true
    - 'PATH="$PATH:~/shale/phantomjs/bin/" java -jar selenium -role node -hub http://localhost:4444/register/grid -nodeConfig ./libs/selenium/nodeConfig.json':
        background: true
  override:
    - env PATH="$HOME/bin:$PATH" tox
